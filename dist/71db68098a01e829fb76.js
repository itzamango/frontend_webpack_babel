import"../SASS/styles.scss";addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".btn_menu");e&&e.addEventListener("click",(function(){document.querySelector("secciones-navbar").classList.toggle("show")}))})),addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".btn_menu");e&&e.addEventListener("click",(function(){document.querySelector("secciones-navbar").classList.toggle("show")}))}));var buscarBar=document.getElementById("search_bar"),enviarBtn=document.getElementById("submit_btn"),randomBtn=document.getElementById("random_btn"),avisoBusqueda=document.getElementById("mensaje-buscar"),resultadoPlatillos=document.getElementById("platillos-encontrados"),detallesPlatillo=document.getElementById("platillo-seleccionado"),divrecomendaciones=document.getElementById("recomendaciones-populares"),buscarPlatillo=function(e){e.preventDefault(),detallesPlatillo.innerHTML="";var t=buscarBar.value;if(t.trim())fetch("https://www.themealdb.com/api/json/v1/1/search.php?s=".concat(t)).then((function(e){return e.json()})).then((function(e){console.log(e),avisoBusqueda.innerHTML="";var n=document.createElement("h3"),a=document.createTextNode("Resultados para: '".concat(t,"'"));if(n.appendChild(a),avisoBusqueda.appendChild(n),null===e.meals){avisoBusqueda.innerHTML="";var l=document.createTextNode("No se encontraron resultados. Intente usando una sola palabra.");avisoBusqueda.appendChild(l),resultadoPlatillos.innerHTML=""}else resultadoPlatillos.innerHTML="",e.meals.map((function(e){var t=document.createElement("div");t.className="meal";var n=document.createElement("img");n.src=e.strMealThumb,n.alt=e.strMeal,n.id="img-".concat(e.idMeal);var a=document.createElement("div");a.className="meal-info";var l=document.createElement("h3");l.id="nme-".concat(e.idMeal);var o=document.createTextNode("".concat(e.strMeal));l.appendChild(o),a.appendChild(l),t.appendChild(n),t.appendChild(a),resultadoPlatillos.appendChild(t)}))})),buscarBar.value="";else{buscarBar.placeholder="Busca el platillo usando una palabra",avisoBusqueda.innerHTML="";var n=document.createTextNode("Utilice una palabra para iniciar la búsqueda");avisoBusqueda.appendChild(n),setTimeout((function(){avisoBusqueda.innerHTML=""}),3e3)}resultadoPlatillos.scrollIntoView({behavior:"smooth"})},buscarPlatilloRandom=function(e){resultadoPlatillos.innerHTML="",avisoBusqueda.innerHTML="";for(var t=[],n=1;n<=8;n++)fetch("https://www.themealdb.com/api/json/v1/1/random.php").then((function(e){return e.json()})).then((function(e){var n=e.meals[0];t.push(n)})).then((function(e){console.log(t),resultadoPlatillos.innerHTML="",t.map((function(e){var t=document.createElement("div");t.className="meal";var n=document.createElement("img");n.src=e.strMealThumb,n.alt=e.strMeal,n.id="img-".concat(e.idMeal);var a=document.createElement("div");a.className="meal-info";var l=document.createElement("h6");l.id="nme-".concat(e.idMeal);var o=document.createTextNode("".concat(e.strMeal));l.appendChild(o),a.appendChild(l),t.appendChild(n),t.appendChild(a),resultadoPlatillos.appendChild(t)}))}));resultadoPlatillos.scrollIntoView({behavior:"smooth"})},encontrarPlatilloPorId=function(e){console.log("encontrarPlatilloPorId"),fetch("https://www.themealdb.com/api/json/v1/1/lookup.php?i=".concat(e)).then((function(e){return e.json()})).then((function(e){var t=e.meals[0];agregarElemento(t)}))},agregarElemento=function(e){for(var t=[],n=1;n<=20&&e["strIngredient".concat(n)];n++)t.push("".concat(e["strIngredient".concat(n)]," - ").concat(e["strMeasure".concat(n)]));detallesPlatillo.innerHTML='\n        <div class="platillo-seleccionado-detalles">\n         <h2>Receta</h2>\n            <div class="platillo-container">\n            <img class="platillo-img" src="'.concat(e.strMealThumb,'" alt="').concat(e.strMeal,'" />\n            <div class="platillo-seleccionado-cat-area">\n                <h3>').concat(e.strMeal,"</h3>\n                    ").concat(e.strCategory?"<p>Categoría - ".concat(e.strCategory,"</p>"):"","\n                    ").concat(e.strArea?"<p>Área - ".concat(e.strArea,"</p>"):"",'\n                </div>\n            </div>\n           \n            <div class="platillo-seleccionado-instrucciones">\n                <h2>Instrucciones:</h2>\n                <p>').concat(e.strInstructions,"</p>\n                <h2>Ingredientes:</h2>\n                <ul>\n                    ").concat(t.map((function(e){return"<li>".concat(e,"</li>")})).join(""),'\n                </ul>\n            </div>\n            <iframe width="420" height="315"\n                    src="//www.youtube.com/embed/').concat(e.strYoutube.slice(32),'"\n                    frameborder="0" allowfullscreen>\n            </iframe>\n        </div>\n    '),detallesPlatillo.scrollIntoView({behavior:"smooth"})};!function(){divrecomendaciones.innerHTML="";for(var e=[],t=1;t<=8;t++)fetch("https://www.themealdb.com/api/json/v1/1/random.php").then((function(e){return e.json()})).then((function(t){var n=t.meals[0];e.push(n)})).then((function(t){console.log(e),divrecomendaciones.innerHTML="",e.map((function(e){var t=document.createElement("div");t.className="meal";var n=document.createElement("img");n.src=e.strMealThumb,n.alt=e.strMeal,n.id="img-".concat(e.idMeal);var a=document.createElement("div");a.className="meal-info";var l=document.createElement("h3");l.id="nme-".concat(e.idMeal);var o=document.createTextNode("".concat(e.strMeal));l.appendChild(o),a.appendChild(l),t.appendChild(n),t.appendChild(a),divrecomendaciones.appendChild(t)}))}))}(),enviarBtn.addEventListener("submit",buscarPlatillo),randomBtn.addEventListener("click",buscarPlatilloRandom),resultadoPlatillos.addEventListener("click",(function(e){if(e.target.getAttribute("id").includes("img-")||e.target.getAttribute("id").includes("nme-")){var t=e.target.getAttribute("id").slice(4);encontrarPlatilloPorId(t)}})),divrecomendaciones.addEventListener("click",(function(e){if(e.target.getAttribute("id").includes("img-")||e.target.getAttribute("id").includes("nme-")){var t=e.target.getAttribute("id").slice(4);encontrarPlatilloPorId(t)}}));